version: '3'

services:
{% for tool in tools %}
  {{ tool.descriptor }}
{% endfor %}
  report_builder:
    build:
        context: ./dockerfiles/Report_Builder
        dockerfile: Dockerfile
    container_name: report_builder
    command: node scripts/test.js
    depends_on:
        - nginx
    volumes:
        - ./src/results:/data

  nginx:
    build:
        context: ./dockerfiles/Nginx
        dockerfile: Dockerfile
    container_name: nginx
    ports:
        - 80:80
    volumes:
        - ./src/results:/reports
